# mime types which should be delivered with correct charset
AddType text/html .phtml
AddType text/html .html

# AddCharset sets charset to be added to the mime type
AddCharset UTF-8 .phtml
AddCharset UTF-8 .html

# disable directory browsing
Options -Indexes

# enable apache rewrite engine
RewriteEngine On

# if you're using mod_rewrite already for something else uncomment the next line
# RewriteBase /

# Pimcore redirects & rewrites
# --------------------------------------------------------------------

# Allow direct access to techno directory - this should come before other rules
RewriteCond %{REQUEST_URI} ^/techno/
RewriteRule ^.*$ - [L]

# ADMIN: redirect admin requests to Symfony front controller
RewriteCond %{REQUEST_URI} ^/admin
RewriteRule ^(.*)$ index.php [QSA,L]

# ASSETS: check if request method is GET (because of WebDAV) and if the requested file doesn't exist
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/pimcore_assethelper_thumbnail.png$ /bundles/pimcoreadmin/img/gray.png [L]

# redirect robots.txt / sitemap.xml / favicon.ico to the default document if it doesn't exist as a static file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(robots\.txt|sitemap\.xml|favicon\.ico)$ index.php [L]

# ASSETS: check if request method is GET (because of WebDAV) and if the requested file doesn't exist
RewriteCond %{REQUEST_METHOD} GET
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/?(.+)$ index.php [QSA,L]

# enable gzip compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>